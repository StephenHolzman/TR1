

\documentclass{article}

\usepackage{amsmath}
\usepackage{natbib}
\bibpunct{(}{)}{,}{a}{}{;} 
\newcommand{\dd}{\; \mathrm{d}}
\usepackage{url}
\usepackage{authblk}

\begin{document}
\title{Reading Human Fertility Database and Human Mortality Database data into \texttt{R}}
\author{Tim Riffe}
\affil{Department of Demography, University of California, Berkeley}
\maketitle
\begin{abstract}
This is about
\end{abstract}

\section{Motivation}
The \citet{HFD} and \citet{HMD} are two widely used data sources
for the comparative and historical study of fertiltiy and mortality. Both
databases offer the option to download data in bulk in a few different formats. After a bulk
download, users can then set up local databases in a variety of
convenient ways, such as that described by \citet{minton2015} for \texttt{R}
\citep{Rcitation} users. Another option for \texttt{R} users is to read data
directly into an interactive session from the respective database websites. This
option is a bit tricky for the typical \texttt{R} user to program from scratch,
but it is a convenient way to quickly start working with data and
generating results on the fly. Some other common pitfalls for working with
these data sources in \texttt{R} stem from age-class and year coding, which
often require coersion to use as an integer in analyses. We present a package,
\texttt{DemogBerkeley}, which handles these issues automatically for \texttt{R}
users. The goal is to reduce the coding time and effort between acquiring
HMD or HFD source data and conducting analysis.

\section{Installation}
The main package is hosted on \texttt{github}. Two external dependencies help
\texttt{R} handle web authentification to the databases, and these must be installed first in order for \texttt{DemogBerkeley}
to properly install. These two dependencies are \texttt{cURL} and \texttt{XML},
and their installation unfortunately depends on the operation system. 

In \texttt{Linux} and similar systems, open the Terminal and run:
\begin{verbatim}
sudo apt-get install libcurl
sudo apt-get install libxml2-dev
\end{verbatim}
Then install \texttt{DemogBerkeley} using:
\begin{verbatim}
library(devtools)
install_github("UCBdemography/DemogBerkeley", subdir = "DemogBerkeley")
\end{verbatim}
This is the simplest case. For Windows, Mac, or other special cases, some
further steps are required. Please consult the
\texttt{README}\footnote{The
\texttt{README} is at the
foot of the main repository
page: \url{https://github.com/UCBdemography/DemogBerkeley}} file on the
\texttt{github} repository for more details, and contact the maintainer if
necessary.

\section{Usage and examples}
Load the package using:
\begin{verbatim}
library(DemogBerkeley)
\end{verbatim}
The two main functions of interest are \texttt{readHMDweb()} and
\texttt{readHFDweb()}, and both functions have identical arguments. It helps to
be a bit familiar with HMD and HFD file naming conventions. To get the
population codes used in either database, run 
\begin{verbatim}
getHFDcountries()
getHMDcountries()
\end{verbatim}
To see the data products available for a given country, run
\begin{verbatim}
getHFDitemavail("USA")
getHMDitemavail("USA")
\end{verbatim}
The HMD and HFD both require user registration, and users will have usernames
and passwords for these databases.

\section{Acknowledgements}
Thanks to Joshua Goldstein and Carl Boe for supporting development of this R
functionality, and to Vladimir Shkolnikov, Dmitri Jdanov, and Tom\'{a}\^{s}
Sobotka for the invitation to present this material at the HFD side meeting to
the 2015 PAA Annual Meeting.
This work was supported by the National Institute On Aging of the U.S. National Institutes of Health (NIH) under Award Numbers R01-AG011552 and R01-AG040245. The content is solely the responsibility of the
author and does not necessarily represent the official views of the NIH.

\bibliographystyle{plainnat}
  \bibliography{references} 

\end{document}

